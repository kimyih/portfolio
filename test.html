<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>portfolio</title>
    <link rel="stylesheet" href="./assets/css/test.css" />
    <link rel="stylesheet" href="./assets/css/font.css" />
    <link rel="stylesheet" href="./assets/script/lenis.js" />

    <!-- GSAP 라이브러리 추가 -->
    <link rel="preconnect" href="//fdn.fontcdn.ir" />
    <link rel="preconnect" href="//v1.fontapi.ir" />
    <link href="https://v1.fontapi.ir/css/SFProDisplay" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.2/ScrollTrigger.min.js"></script>
  </head>

  <body>
    <div id="wrap">
      <header id="header">
        <ul>
          <li><a href="#">Work</a></li>
          <li><a href="#">PORTFOLIO / ABOUT ME</a></li>
          <li><a href="#">Today is Hot 09:02:31</a></li>
        </ul>
      </header>
      <div class="wrap_container">
        <div class="first_section">
          <div class="first_animation">
            <div class="anibox1"></div>
            <div class="anibox2"></div>
            <div class="anibox3"></div>
            <div class="anibox4"></div>
            <div class="anibox5"></div>
            <div class="anibox6"></div>
            <div class="anibox7"></div>
          </div>
          <div class="first_top_wrap">
            <div class="first_top_line1"></div>
            <div class="first_top_line2"></div>
          </div>
          <div class="first_bottom_wrap">
            <nav class="nav">
              <ul>
                <li><a href="#">AI Modernism of Kharvie</a></li>
                <li><a href="#">PORTFOLIO / ABOUT ME</a></li>
                <li><a href="#">Today is Hot 09:02:31</a></li>
              </ul>
            </nav>
            <div class="bottom_wrap">
              <span class="introduction">
                Hello, I am Kim Yihyun, born with the unique binary number
                001010. With a passion for coding and creativity, I aim to
                provide unique and captivating web experiences where technology
                and art harmonize. I always enjoy new challenges and
                continuously grow, striving to push the boundaries of web
                development. Thank you.
              </span>
              <div class="bottom_line1"></div>
              <div class="bottom_line2"></div>
              <div class="bottom_line3"></div>
              <div class="bottom_line4"></div>
            </div>
          </div>
        </div>

        <div class="anim_section"></div>

        <div class="second_section">
          <div class="projecn1_left_wrap">
            <div class="project1_title">
              <span class="pr1_codepin">Codepin</span>
              <span class="pr1_project">PROJECT</span>
            </div>
            <div class="project1_line_wrap">
              <div class="project1_line"></div>
              <div class="project1_line_info">
                <div class="pj_line_title">Code View</div>
                <div class="pj_line_arrow">
                  <img src="./assets/img/Arrow1.svg" alt="" />
                </div>
              </div>
            </div>
          </div>
          <div class="project1_right_wrap">
            <div class="pj1_skill">
              <span class="pj1_skill_title">[SKILL]</span>
              <span class="pj1_skill_desc1">MYSQL</span>
              <span class="pj1_skill_desc2">Javascript</span>
              <span class="pj1_skill_desc3">PHP</span>
            </div>
            <div class="pj1_desc">
              <span class="pj1_desc1">Codepin은 코드를 폴더별로 관리하고</span>
              <span class="pj1_desc2">URL 입력 시 사이트 정보를 확인하며,</span>
              <span class="pj1_desc3">유용한 코드를 공유하는 공간입니다. </span>
            </div>
          </div>
          <div class="second_container">
            <div class="projectimg_1">
              <img src="./assets/img/project1.png" alt="프로젝트1" />
            </div>
            <div class="projectimg_2">
              <img src="./assets/img/project2.png" alt="프로젝트2" />
            </div>
            <div class="projectimg_3">
              <img src="./assets/img/project3.png" alt="프로젝트3" />
            </div>
            <div class="projectimg_4">
              <img src="./assets/img/project4.png" alt="프로젝트3" />
            </div>
          </div>
        </div>
        <!-- //second_section -->
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        gsap.registerPlugin(ScrollTrigger);

        // header 요소를 선택
        const header = document.querySelector("#header");
        header.style.display = "none"; // 초기에는 숨김

        // ScrollTrigger 설정
        ScrollTrigger.create({
          trigger: ".nav",
          start: "bottom top", // .nav가 화면 상단에 닿았을 때 시작
          end: "bottom+=9999 top", // 트리거가 계속 활성화되도록 끝 지점 설정
          onEnter: () => {
            gsap.to(header, {
              display: "flex",
              opacity: 1,
              y: 0,
              duration: 0.2,
            });
          },
          onLeaveBack: () => {
            gsap.to(header, {
              opacity: 0,
              y: -100,
              duration: 1,
              scrub: 1,
              onComplete: () => (header.style.display = "none"),
            });
          },
        });

        // 이미지 애니메이션 설정
        const images = document.querySelectorAll(".second_container img");

        images.forEach((img, i) => {
          gsap.fromTo(
            img,
            { y: 0 + i * 600, opacity: 0 }, // 각 이미지에 시작 위치 차별화
            {
              y: 0,
              opacity: 1,
              duration: 2,
              scrollTrigger: {
                trigger: ".second_section", // 전체 섹션을 트리거로 설정
                start: "top center+=100", // 스크롤이 조금 덜 된 시점에 시작
                end: "top top", // 트리거가 끝나는 시점
                scrub: 1, // 스크롤과 애니메이션을 동기화
              },
              delay: i * 2, // 각 이미지에 시간차 적용
            }
          );
        });

        // header와 second_container가 만났을 때 애니메이션 설정
        const tl = gsap.timeline({
          scrollTrigger: {
            trigger: ".second_section",
            start: "top top",
            end: "bottom top",
            scrub: true,
            pin: true,
            pinSpacing: true,
            markers: true,
          },
        });

        tl.to(".projectimg_1 img", {
          x: "206.1%", // 이미지들을 오른쪽으로 이동
          ease: "power2.inOut", // 일정한 속도로 애니메이션 설정
          duration: 8,
        })
          .to(
            ".projectimg_2 img",
            {
              x: "103.1%", // 이미지들을 오른쪽으로 이동
              ease: "power2.inOut", // 일정한 속도로 애니메이션 설정
              duration: 8,
            },
            "<" // 이 줄이 있어야 두 애니메이션이 동시에 시작됨
          )
          .fromTo(
            ".projecn1_left_wrap",
            { display: "none", opacity: 0 },
            {
              display: "block",
              opacity: 1,
              duration: 8,
              ease: "power2.inOut",
              onStart: () =>
                gsap.set(".projecn1_left_wrap", { display: "block" }),
            },
            "<"
          );
      });
    </script>
  </body>
</html>
