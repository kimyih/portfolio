<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>portfolio</title>
    <link rel="stylesheet" href="./assets/css/test.css" />
    <link rel="stylesheet" href="./assets/css/font.css" />
    <link rel="stylesheet" href="./assets/script/lenis.js" />

    <!-- GSAP 라이브러리 추가 -->
    <link rel="preconnect" href="//fdn.fontcdn.ir" />
    <link rel="preconnect" href="//v1.fontapi.ir" />
    <link href="https://v1.fontapi.ir/css/SFProDisplay" rel="stylesheet" />

    <style>
      .scroll-anim-wrapper {
        height: 1000vh;
        overflow: hidden;
      }

      .second_section {
        position: sticky;
        top: 0;
        height: 100vh;
      }

      .intro_text {
        opacity: 0;
        transform: translateY(50px);
        transition: all 0.5s ease-out;
      }

      .intro_text.on {
        opacity: 1;
        transform: translateY(0);
      }
    </style>
  </head>

  <body>
    <div id="wrap">
      <header id="header">
        <ul>
          <li><a href="#">Work</a></li>
          <li><a href="#">PORTFOLIO / ABOUT ME</a></li>
          <li><a href="#">Today is Hot 09:02:31</a></li>
        </ul>
      </header>
      <div class="wrap_container">
        <div class="first_section">
          <div class="first_animation">
            <div class="anibox1"></div>
            <div class="anibox2"></div>
            <div class="anibox3"></div>
            <div class="anibox4"></div>
            <div class="anibox5"></div>
            <div class="anibox6"></div>
            <div class="anibox7"></div>
          </div>
          <div class="first_top_wrap">
            <div class="first_top_line1"></div>
            <div class="first_top_line2"></div>
          </div>
          <div class="first_bottom_wrap">
            <nav class="nav">
              <ul>
                <li><a href="#">AI Modernism of Kharvie</a></li>
                <li><a href="#">PORTFOLIO / ABOUT ME</a></li>
                <li><a href="#">Today is Hot 09:02:31</a></li>
              </ul>
            </nav>
            <div class="cursor"></div>
            <div class="bottom_wrap">
              <span class="introduction" id="intro_text">
                <span class="intro_text"
                  >Hello, I am Kim Yihyun, born with the unique</span
                >
                <img
                  src="./assets/img/intro1.png"
                  alt=" Code"
                  class="inline-image intro1"
                />
                <span class="intro_text"> binary number 001010. With a </span>
                <img
                  src="./assets/img/intro2.png"
                  alt=""
                  class="inline-image intro2"
                />
                <span class="intro_text">passion for coding</span>
                <img
                  src="./assets/img/intro3.png"
                  alt=""
                  class="inline-image intro3"
                />
                <span class="intro_text">
                  and creativity, I aim to provide uniq</span
                >
                <img
                  src="./assets/img/intro4.png"
                  alt=""
                  class="inline-image intro4"
                />
                <span class="intro_text">ue and capt</span>
                <img
                  src="./assets/img/intro5.png"
                  alt=""
                  class="inline-image intro5"
                />
                <span class="intro_text">ivating web ex </span>
                <img
                  src="./assets/img/intro8.png"
                  alt=" Code"
                  class="inline-image intro1"
                />
                <span
                  >periences where technology and art harmonize. I always enjoy
                </span>
                <img
                  src="./assets/img/intro6.png"
                  alt=""
                  class="inline-image intro6"
                />
                <span class="intro_text"
                  >new challenges and continuously grow, str</span
                >
                <img
                  src="./assets/img/intro7.png"
                  alt=""
                  class="inline-image intro7"
                />
                <span class="intro_text"
                  >iving to push the boundaries of web development. Thank
                  you.</span
                >
              </span>
              <div class="bottom_line1"></div>
              <div class="bottom_line2"></div>
              <div class="bottom_line3"></div>
              <div class="bottom_line4"></div>
            </div>
          </div>
        </div>

        <div class="anim_section"></div>

        <div class="scroll-anim-wrapper">
          <div class="experiment-content-wrapper text">
            <div class="second_section">
              <div class="projecn1_left_wrap">
                <div class="project1_title">
                  <div class="pr1_codepin">Codepin</div>
                  <!-- <div class="pr2_booking">Booking</div> -->
                  <span class="pr1_project">PROJECT</span>
                </div>
                <div class="project1_line_wrap">
                  <div class="project1_line"></div>
                  <div class="project1_line_info">
                    <div class="pj_line_title">Code View</div>
                    <div class="pj_line_arrow">
                      <img src="./assets/img/Arrow1.svg" alt="" />
                    </div>
                  </div>
                </div>
              </div>
              <div class="project1_right_wrap">
                <div class="pj1_skill">
                  <span class="pj1_skill_title">[SKILL]</span>
                  <span class="pj1_skill_desc1">MYSQL</span>
                  <span class="pj1_skill_desc2">Javascript</span>
                  <span class="pj1_skill_desc3">PHP</span>
                </div>
                <div class="pj1_desc">
                  <span class="pj1_desc1">Codepin은 코드를 URL로 관리하고</span>
                  <span class="pj1_desc2"
                    >URL 입력 시 사이트 정보를 확인하며,</span
                  >
                  <span class="pj1_desc3"
                    >유용한 코드를 공유하는 공간입니다.
                  </span>
                </div>
              </div>
              <div class="second_container">
                <div class="projectimg_1">
                  <img src="./assets/img/project1.png" alt="프로젝트1" />
                </div>
                <div class="projectimg_2">
                  <img src="./assets/img/project2.png" alt="프로젝트2" />
                </div>
                <div class="projectimg_3">
                  <img
                    src="./assets/img/project3.png"
                    id="triggerImage3"
                    alt="프로젝트3"
                  />
                </div>
              </div>
              <div class="img_slide">
                <div class="img-slider-item next _2">
                  <img
                    src="./assets/img/project4.png"
                    id="big-photo-2"
                    alt="프로젝트4"
                  />
                </div>
                <div class="img-slider-item next _3">
                  <img
                    src="./assets/img/project1.png"
                    id="big-photo-3"
                    alt="프로젝트5"
                  />
                </div>
                <div class="img-slider-item next _4">
                  <img
                    src="./assets/img/project2.png"
                    id="big-photo-4"
                    alt="프로젝트5"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- //second_section -->
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollToPlugin.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

        // header 요소를 선택
        const header = document.querySelector("#header");
        header.style.display = "none"; // 초기에는 숨김

        // ScrollTrigger 설정
        ScrollTrigger.create({
          trigger: ".nav",
          start: "bottom top", // .nav가 화면 상단에 닿았을 때 시작
          end: "bottom+=9999 top", // 트리거가 계속 활성화되도록 끝 지점 설정
          onEnter: () => {
            gsap.to(header, {
              display: "flex",
              opacity: 1,
              y: 0,
              duration: 0.2,
            });
          },
          onLeaveBack: () => {
            gsap.to(header, {
              opacity: 0,
              y: -100,
              duration: 1,
              scrub: 1,
              onComplete: () => (header.style.display = "none"),
            });
          },
        });

        // 이미지 애니메이션 설정
        const images = document.querySelectorAll(".second_container img");

        images.forEach((img, i) => {
          gsap.fromTo(
            img,
            { y: 0 + i * 600, opacity: 0 },
            {
              y: 0,
              opacity: 1,
              duration: 8,
              scrollTrigger: {
                trigger: ".second_section",
                start: "top center+=100",
                end: "top top",
                scrub: 1,
              },
              delay: i * 2,
            }
          );
        });

        // .introduction 안의 <span> 요소 애니메이션 설정
        const spans = document.querySelectorAll(".intro_text");

        spans.forEach((span, i) => {
          gsap.fromTo(
            span,
            { y: 100, opacity: 0 },
            {
              y: 0,
              opacity: 1,
              duration: 1,
              scrollTrigger: {
                trigger: span,
                start: "top bottom",
                end: "top center",
                scrub: true,
                toggleActions: "play none none reverse",
              },
              delay: i * 0.2,
            }
          );
        });

        // 메인 타임라인 설정
        const tl = gsap.timeline({
          scrollTrigger: {
            trigger: ".second_section",
            start: "top top",
            end: "bottom+=180% top",
            scrub: true,
            pin: true,
            pinSpacing: true,
            markers: true,
            onComplete: () => {
              gsap.to(window, {
                scrollTo: { y: window.scrollY },
                duration: 0.1,
              });
            },
          },
        });

        // 이미지들을 오른쪽으로 이동하는 애니메이션
        tl.to(".projectimg_1 img", {
          x: "206.1%",
          duration: 8,
          ease: "power2.inOut",
        })
          .to(
            ".projectimg_2 img",
            { x: "103.1%", duration: 8, ease: "power2.inOut" },
            "<"
          )
          .fromTo(
            ".projecn1_left_wrap",
            { display: "none", opacity: 0 },
            {
              display: "block",
              opacity: 1,
              duration: 8,
              ease: "power2.inOut",
              onStart: () =>
                gsap.set(".projecn1_left_wrap", { display: "block" }),
            },
            "<"
          )
          .fromTo(
            ".project1_right_wrap",
            { display: "none", opacity: 0 },
            {
              display: "block",
              opacity: 1,
              duration: 8,
              ease: "power2.inOut",
              onStart: () =>
                gsap.set(".project1_right_wrap", { display: "block" }),
            },
            "<"
          );

        // 새로운 애니메이션: img-slider-item next _2 올라오기
        tl.to(
          ".img-slider-item.next._2",
          {
            yPercent: -100,
            duration: 4,
            ease: "power2.inOut",
            zIndex: 10,
          },
          "+=1"
        );

        // 스크롤 잠금 및 해제 함수
        function lockScroll() {
          document.body.style.overflow = "hidden";
        }

        function unlockScroll() {
          document.body.style.overflow = "";
        }

        // ScrollTrigger 이벤트 리스너 추가
        ScrollTrigger.create({
          trigger: ".second_section",
          start: "top top",
          end: "bottom bottom",
          onEnter: lockScroll,
          onLeaveBack: unlockScroll,
          onLeave: unlockScroll,
        });

        // 커서 애니메이션
        const cursor = document.querySelector(".cursor");
        const bottomWrap = document.querySelector(".bottom_wrap");

        document.addEventListener("mousemove", function (e) {
          const scrollTop = window.scrollY;
          const scrollLeft = window.scrollX;
          cursor.style.left = e.clientX - 125 + scrollLeft + "px";
          cursor.style.top = e.clientY - 125 + scrollTop + "px";
        });

        bottomWrap.addEventListener("mouseenter", () => {
          gsap.to(cursor, { opacity: 1, display: "block", duration: 0.3 });
        });

        bottomWrap.addEventListener("mouseleave", () => {
          gsap.to(cursor, { opacity: 0, display: "none", duration: 0.3 });
        });
      });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const cursor = document.querySelector(".cursor");
        const bottomWrap = document.querySelector(".bottom_wrap");

        document.addEventListener("mousemove", function (e) {
          const scrollTop = window.scrollY; // 현재 문서의 세로 스크롤 위치
          const scrollLeft = window.scrollX; // 현재 문서의 가로 스크롤 위치
          // 커서 위치 계산에 스크롤 위치 반영
          cursor.style.left = e.clientX - 125 + scrollLeft + "px";
          cursor.style.top = e.clientY - 125 + scrollTop + "px";
        });

        bottomWrap.addEventListener("mouseenter", () => {
          gsap.to(cursor, { opacity: 1, display: "block", duration: 0.3 });
        });

        bottomWrap.addEventListener("mouseleave", () => {
          gsap.to(cursor, { opacity: 0, display: "none", duration: 0.3 });
        });
      });
    </script>
  </body>
</html>
